# RBAC系统角色权限设计说明

## 一、当前角色层级

目前系统包含三个基本角色层级：

```sql
role_id = 1  -- 超级管理员
role_id = 2  -- 测试管理员 
role_id = 3  -- 普通用户
```

## 二、角色权限分配

### 1. 超级管理员权限
- 拥有系统所有权限
- 在`sys_role_permission`表中配置了所有权限ID

### 2. 测试管理员权限
- 用户管理模块
  - 查看用户
  - 编辑用户
- 角色管理模块
  - 查看角色
- 权限管理模块
  - 查看权限
- 日志管理模块
  - 查看日志

### 3. 普通用户权限
- 用户管理模块
  - 仅查看用户
- 日志管理模块
  - 仅查看日志

## 三、角色扩展方案

如需扩展更多角色层级，只需要：

1. 在`sys_role`表中添加新角色记录
```sql
-- 添加新角色示例
INSERT INTO sys_role (role_name, role_code, description, status, create_time)
VALUES 
('部门管理员', 'ROLE_DEPT_ADMIN', '管理部门用户权限', 1, NOW()),
('项目经理', 'ROLE_PROJECT_MANAGER', '管理项目相关权限', 1, NOW()),
('运维人员', 'ROLE_OPS', '系统运维权限', 1, NOW());
```

2. 在`sys_role_permission`表中配置新角色的权限
```sql
-- 配置新角色权限示例
INSERT INTO sys_role_permission (role_id, permission_id)
VALUES 
-- 部门管理员权限
(4, 101), -- 用户管理模块
(4, 102), -- 查看用户
(4, 103), -- 新增用户
(4, 104), -- 编辑用户

-- 项目经理权限
(5, 101), -- 用户管理模块
(5, 102), -- 查看用户

-- 运维人员权限
(6, 401), -- 日志管理模块
(6, 402); -- 查看日志
```

## 四、权限ID分配规则

系统采用分段式ID分配策略：

1. 系统管理模块: 1-100
2. 用户管理模块: 101-200
3. 角色管理模块: 201-300
4. 权限管理模块: 301-400
5. 日志管理模块: 401-500
6. 预留500-1000: 系统模块扩展
7. 1001以后: 业务模块

## 五、注意事项

1. 角色扩展时无需修改权限表结构
2. 新角色的权限应该遵循最小权限原则
3. 权限的分配要考虑业务场景和安全性
4. 建议保持权限的层级结构清晰
5. 角色编码(role_code)要保持唯一性