# 用户管理页面边界条件测试文档

## 1. 用户名边界条件测试

### 1.1 长度限制测试
- [ ] **最小长度测试(3字符)**
  ```typescript
  // 测试数据
  username: "ab"  // 预期：不通过，提示最小3字符
  username: "abc" // 预期：通过
  ```

- [ ] **最大长度测试(20字符)**
  ```typescript
  // 测试数据
  username: "a".repeat(21) // 预期：不通过，提示最大20字符
  username: "a".repeat(20) // 预期：通过
  ```

### 1.2 特殊字符测试
- [ ] **空格处理**
  ```typescript
  username: "user name"    // 预期：提示不能包含空格
  username: " username"    // 预期：提示不能以空格开头
  username: "username "    // 预期：提示不能以空格结尾
  ```

- [ ] **特殊字符限制**
  ```typescript
  username: "user@name"    // 预期：提示包含非法字符
  username: "user#name"    // 预期：提示包含非法字符
  username: "user-name"    // 预期：根据具体需求判断是否允许
  ```

### 1.3 唯一性测试
- [ ] **重复用户名测试**
  ```typescript
  // 步骤1：创建用户
  username: "testuser"
  
  // 步骤2：再次创建同名用户
  username: "testuser"     // 预期：提示用户名已存在
  ```

## 2. 密码边界条件测试

### 2.1 长度限制测试
- [ ] **最小长度测试(6字符)**
  ```typescript
  password: "12345"  // 预期：不通过，提示最小6字符
  password: "123456" // 预期：通过
  ```

- [ ] **最大长度测试(20字符)**
  ```typescript
  password: "a".repeat(21) // 预期：不通过，提示最大20字符
  password: "a".repeat(20) // 预期：通过
  ```

### 2.2 密码复杂度测试
- [ ] **密码组成要求**
  ```typescript
  password: "123456"       // 预期：提示需要包含字母
  password: "abcdef"       // 预期：提示需要包含数字
  password: "abc123"       // 预期：提示需要包含大写字母
  password: "Abc123"       // 预期：通过
  ```

### 2.3 编辑模式密码处理
- [ ] **密码为空测试**
  ```typescript
  // 编辑模式下
  password: ""            // 预期：允许为空，表示不修改密码
  password: undefined     // 预期：允许为undefined，表示不修改密码
  ```

## 3. 邮箱和手机号验证测试

### 3.1 邮箱格式测试
- [ ] **基本格式测试**
  ```typescript
  email: "test"           // 预期：不通过，提示格式错误
  email: "test@"          // 预期：不通过，提示格式错误
  email: "test@com"       // 预期：不通过，提示格式错误
  email: "test@test.com"  // 预期：通过
  ```

- [ ] **特殊邮箱测试**
  ```typescript
  email: "test@test.com.cn"    // 预期：通过
  email: "test+123@test.com"   // 预期：通过
  email: "test.name@test.com"  // 预期：通过
  ```

### 3.2 手机号格式测试
- [ ] **国内手机号测试**
  ```typescript
  phone: "1234567890"     // 预期：不通过，格式错误
  phone: "12345678901"    // 预期：不通过，非法前缀
  phone: "13800138000"    // 预期：通过
  phone: "19900138000"    // 预期：通过
  ```

- [ ] **特殊格式测试**
  ```typescript
  phone: "138-0013-8000"  // 预期：不通过，包含非法字符
  phone: "+8613800138000" // 预期：不通过，不支持国际格式
  ```

## 4. 状态切换边界条件测试

### 4.1 超级管理员状态测试
- [ ] **禁用保护测试**
  ```typescript
  // 尝试禁用超级管理员
  user: {
    id: 1,
    username: "admin",
    status: 1
  }
  // 预期：不允许禁用，提示无法禁用超级管理员
  ```

### 4.2 批量状态切换测试
- [ ] **混合状态测试**
  ```typescript
  // 选中多个用户，包含不同状态
  selectedUsers: [
    { id: 1, status: 1 },
    { id: 2, status: 0 }
  ]
  // 预期：根据目标状态统一处理
  ```

### 4.3 状态切换失败处理
- [ ] **网络异常测试**
  ```typescript
  // 模拟网络请求失败
  // 预期：
  // 1. 显示错误提示
  // 2. 状态回滚到原始状态
  // 3. 不影响其他用户状态
  ```

## 5. 角色分配边界条件测试

### 5.1 角色为空测试
- [ ] **必选角色测试**
  ```typescript
  roleIds: []  // 预期：提示至少选择一个角色
  ```

### 5.2 角色权限冲突测试
- [ ] **超级管理员角色限制**
  ```typescript
  // 尝试给普通用户分配超级管理员角色
  roleIds: [1]  // 预期：提示无权分配超级管理员角色
  ```

### 5.3 角色数量限制测试
- [ ] **最大角色数测试**
  ```typescript
  // 选择超过限制的角色数
  roleIds: [1,2,3,4,5,6,7,8,9,10,11]  // 预期：提示最多选择10个角色
  ```

## 6. 批量操作边界条件测试

### 6.1 批量删除限制测试
- [ ] **数量限制测试**
  ```typescript
  // 选择超过100个用户
  selectedIds: Array(101).fill().map((_, i) => i + 1)
  // 预期：提示最多选择100个用户
  ```

### 6.2 特殊用户保护测试
- [ ] **超级管理员保护**
  ```typescript
  // 批量删除包含超级管理员
  selectedIds: [1, 2, 3]  // 1为超级管理员ID
  // 预期：提示无法删除超级管理员
  ```

### 6.3 批量操作异常处理
- [ ] **部分失败测试**
  ```typescript
  // 批量删除时部分用户删除失败
  // 预期：
  // 1. 显示部分失败的详细信息
  // 2. 已成功删除的用户不回滚
  // 3. 提示用户重试失败的操作
  ```

## 7. 分页查询边界条件测试

### 7.1 空数据处理测试
- [ ] **无数据页面测试**
  ```typescript
  // 查询不存在的数据
  queryParams: {
    username: "nonexistent",
    pageNum: 1,
    pageSize: 10
  }
  // 预期：显示无数据提示
  ```

### 7.2 分页限制测试
- [ ] **页码限制测试**
  ```typescript
  // 测试异常页码
  pageNum: 0    // 预期：自动修正为1
  pageNum: -1   // 预期：自动修正为1
  pageNum: 9999 // 预期：自动修正为最大页码
  ```

- [ ] **每页数量限制测试**
  ```typescript
  // 测试异常每页数量
  pageSize: 0    // 预期：自动修正为默认值
  pageSize: 1000 // 预期：自动修正为最大允许值
  ```

### 7.3 查询条件组合测试
- [ ] **多条件组合测试**
  ```typescript
  // 测试所有查询条件组合
  queryParams: {
    username: "test",
    nickname: "测试",
    status: 1,
    pageNum: 1,
    pageSize: 10
  }
  // 预期：正确处理所有条件的组合查询
  ```

## 8. 特殊场景测试

### 8.1 编辑模式特性
- [ ] **用户名锁定**：编辑模式下用户名输入框应禁用
- [ ] **密码字段**：编辑模式下不显示密码字段
- [ ] **角色回显**：正确显示用户已分配的角色
- [ ] **状态回显**：正确显示用户当前状态

### 8.2 表单操作测试
- [ ] **重置功能**：点击重置按钮后表单恢复初始状态
- [ ] **取消操作**：点击取消按钮后关闭表单并清空数据
- [ ] **并发提交**：防止表单重复提交
- [ ] **加载状态**：提交时显示loading状态

### 8.3 异常处理测试
- [ ] **网络错误**：请求失败时显示错误提示
- [ ] **验证失败**：字段验证失败时显示具体错误信息
- [ ] **权限不足**：无权操作时显示相应提示
- [ ] **服务异常**：服务端异常时显示友好提示

## 9. 测试结果记录

### 9.1 验证测试结果
- [ ] 用户名验证通过
- [ ] 密码验证通过
- [ ] 邮箱验证通过
- [ ] 手机号验证通过
- [ ] 角色验证通过
- [ ] 状态验证通过

### 9.2 功能测试结果
- [ ] 表单提交功能正常
- [ ] 编辑功能正常
- [ ] 重置功能正常
- [ ] 取消功能正常

### 9.3 异常处理结果
- [ ] 网络错误处理正常
- [ ] 验证错误处理正常
- [ ] 权限控制正常
- [ ] 异常提示友好

## 10. 后续优化建议

### 10.1 功能优化
1. 添加密码强度提示
2. 优化表单验证提示
3. 增加批量操作功能
4. 添加用户导入导出

### 10.2 性能优化
1. 优化表单提交响应速度
2. 优化角色数据加载
3. 添加数据缓存机制
4. 优化异步验证逻辑

### 10.3 用户体验优化
1. 添加操作引导
2. 优化错误提示样式
3. 添加快捷键支持
4. 优化表单布局

## 11. 更新记录

### 2024-02-21
- 创建测试文档
- 添加详细测试用例
- 补充测试结果记录
- 添加优化建议
- 合并和完善边界测试案例 