# 用户管理页面测试文档 v1.0.0 (2024-02-20)

## 1. 环境准备

### 1.1 启动服务
```bash
# 1. 进入前端项目目录
cd rbac-ui

# 2. 确保依赖已安装
npm install

# 3. 启动开发服务器
npm run dev
```

### 1.2 Mock数据配置
确认 `.env.development` 中的配置：
```bash
VITE_USE_MOCK=true  # 启用Mock数据
```

## 2. 功能测试步骤

### 2.1 页面访问测试
1. 访问用户管理页面
   - 打开浏览器访问：http://localhost:3000/system/user
   - 确认页面正确加载
   - 检查页面布局是否完整

2. 检查页面组件
   - 搜索区域是否显示
   - 工具栏是否显示
   - 表格是否显示
   - 分页组件是否显示

### 2.2 搜索功能测试
1. 基础搜索
   ```typescript
   // 测试用户名搜索
   - 输入用户名：admin
   - 点击搜索按钮
   - 验证结果是否符合预期

   // 测试昵称搜索
   - 输入昵称：管理员
   - 点击搜索按钮
   - 验证结果是否符合预期
   ```

2. 状态筛选
   ```typescript
   // 测试状态筛选
   - 选择状态：启用
   - 点击搜索按钮
   - 验证只显示启用状态的用户
   ```

3. 重置功能
   ```typescript
   // 测试重置功能
   - 输入搜索条件
   - 点击重置按钮
   - 验证表单是否清空
   - 验证是否重新加载数据
   ```

### 2.3 表格功能测试
1. 数据展示
   - 检查表格列是否完整
   - 验证数据显示是否正确
   - 检查日期格式化

2. 多选功能
   ```typescript
   // 测试多选功能
   - 点击表格复选框
   - 验证选中状态
   - 验证批量删除按钮状态
   ```

3. 状态切换
   ```typescript
   // 测试状态开关
   - 点击状态开关
   - 验证状态是否改变
   - 检查提示信息
   ```

### 2.4 操作功能测试
1. 删除操作
   ```typescript
   // 单个删除
   - 点击删除按钮
   - 确认弹窗显示
   - 验证删除结果
   - 检查提示信息

   // 批量删除
   - 选中多个用户
   - 点击批量删除
   - 确认弹窗显示
   - 验证删除结果
   ```

2. 状态管理
   ```typescript
   // 状态修改
   - 切换用户状态
   - 验证状态更新
   - 检查提示信息
   ```

### 2.5 分页功能测试
1. 分页切换
   ```typescript
   // 页码切换
   - 点击下一页
   - 验证数据更新
   - 点击上一页
   - 验证数据更新

   // 每页条数
   - 修改每页显示条数
   - 验证数据量变化
   ```

## 3. 异常测试

### 3.1 输入验证
1. 特殊字符输入
2. 空值处理
3. 长度限制

### 3.2 错误处理
1. 网络错误提示
2. 操作失败提示
3. 加载状态显示

## 4. 测试要点

### 4.1 功能验证
- [ ] 页面正确加载
- [ ] 搜索功能正常
- [ ] 重置功能正常
- [ ] 表格显示正确
- [ ] 分页功能正常
- [ ] 删除功能正常
- [ ] 状态修改正常

### 4.2 界面验证
- [ ] 布局美观
- [ ] 响应式适配
- [ ] 操作流畅
- [ ] 提示信息清晰

### 4.3 性能验证
- [ ] 页面加载速度
- [ ] 操作响应速度
- [ ] 数据刷新速度

## 5. 问题记录

### 5.1 问题模板
```markdown
问题描述：
重现步骤：
1. 
2. 
3. 
预期结果：
实际结果：
```

### 5.2 已知问题
1. 待补充...

## 6. 更新记录

### 2024-02-20
- 创建测试文档
- 添加测试步骤
- 完善测试要点 

## 7. 用户表单功能测试 (2024-02-20新增)

### 7.1 新增用户测试
```typescript
// 基本流程测试
1. 点击"新增"按钮
   - 验证表单弹窗显示
   - 验证表单字段为空
   - 验证用户名输入框可编辑

2. 表单填写测试
   - 填写必填字段：
     用户名: testuser
     密码: 123456
     角色: 选择"普通用户"
   - 填写可选字段：
     昵称: 测试用户
     邮箱: test@example.com
     手机号: 13800138000
   - 选择状态: 启用

3. 表单验证测试
   - 不填写必填字段，点击确定
   - 输入不合法的邮箱格式
   - 输入不合法的手机号格式
   - 输入不符合长度要求的用户名和密码

4. 提交测试
   - 填写正确信息后点击确定
   - 验证成功提示
   - 验证表单关闭
   - 验证列表数据更新
```

### 7.2 编辑用户测试
```typescript
// 基本流程测试
1. 点击"编辑"按钮
   - 验证表单弹窗显示
   - 验证表单字段已填充当前用户数据
   - 验证用户名输入框禁用

2. 表单编辑测试
   - 修改昵称
   - 修改邮箱
   - 修改手机号
   - 修改角色
   - 修改状态

3. 表单验证测试
   - 清空必填字段
   - 输入不合法的邮箱格式
   - 输入不合法的手机号格式

4. 提交测试
   - 修改信息后点击确定
   - 验证成功提示
   - 验证表单关闭
   - 验证列表数据更新
```

### 7.3 异常场景测试
```typescript
1. 网络异常测试
   - 模拟网络断开情况下的提交
   - 验证错误提示
   - 验证加载状态消失

2. 并发操作测试
   - 快速打开关闭表单
   - 重复提交表单
   - 提交过程中关闭表单

3. 数据异常测试
   - 提交超长字符串
   - 提交特殊字符
   - 提交空格字符串
```

### 7.4 测试结果记录
- [ ] 新增用户功能正常
- [ ] 编辑用户功能正常
- [ ] 表单验证正常
- [ ] 异常处理正常
- [ ] 用户体验良好

## 8. 后续开发建议
1. 完善角色选择功能
   - 添加角色管理API
   - 实现角色列表获取
   - 添加角色选择必选验证

2. 添加用户详情功能
   - 实现用户详情页面
   - 添加更多用户信息展示
   - 优化信息展示布局

3. 添加高级功能
   - 用户导入导出
   - 密码重置
   - 批量操作优化 